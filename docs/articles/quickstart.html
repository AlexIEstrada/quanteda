<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quick Start Guide • quanteda</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet">
<script src="../extra.js"></script><meta property="og:title" content="Quick Start Guide">
<meta property="og:description" content="quanteda">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-144616-24"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-144616-24');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">quanteda</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Quick Start
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/quickstart.html">Quick Start Guide</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_es.html">Guía de Inicio Rápido</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_cn.html">快速入门指南</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_ja.html">クイック・スタートガイド</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_hi.html">त्वरित आरंभ </a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Features
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/pkgdown/comparison.html">Feature comparison</a>
    </li>
    <li>
      <a href="../articles/pkgdown/design.html">Package design</a>
    </li>
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/pkgdown/examples/phrase.html">Multi-word expressions</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/plotting.html">Textual data visualization</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/lsa.html">Latent Semantic Analysis (LSA)</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/chinese.html">Chinese text analysis</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/twitter.html">Social media analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Replications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/pkgdown/replication/digital-humanities.html">Text Analysis with R for Students of Literature</a>
    </li>
    <li>
      <a href="../articles/pkgdown/replication/text2vec.html">Word embedding (word2vec)</a>
    </li>
    <li>
      <a href="../articles/pkgdown/replication/qss.html">Quantitative Social Science Ch. 5.1</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/quanteda/quanteda">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="quickstart_files/header-attrs-2.3/header-attrs.js"></script><script src="quickstart_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Quick Start Guide</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/quanteda/quanteda/blob/master/vignettes/quickstart.Rmd"><code>vignettes/quickstart.Rmd</code></a></small>
      <div class="hidden name"><code>quickstart.Rmd</code></div>

    </div>

    
    
<div id="installing-the-package" class="section level1">
<h1 class="hasAnchor">
<a href="#installing-the-package" class="anchor"></a>Installing the package</h1>
<p>Since <strong>quanteda</strong> is available on <a href="https://CRAN.R-project.org/package=quanteda">CRAN</a>, you can install by using your GUI’s R package installer, or execute:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"quanteda"</span>)</pre></body></html></div>
<p>See an instructions at <a href="https://github.com/quanteda/quanteda" class="uri">https://github.com/quanteda/quanteda</a> to install the GitHub version,</p>
<div id="additional-recommended-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-recommended-packages" class="anchor"></a>Additional recommended packages:</h2>
<p>The following packages work well with or extend <strong>quanteda</strong> and we recommend that you also install them:</p>
<ul>
<li><p><a href="https://github.com/quanteda/readtext"><strong>readtext</strong></a>: An easy way to read text data into R, from almost any input format.</p></li>
<li><p><a href="https://github.com/quanteda/spacyr"><strong>spacyr</strong></a>: NLP using the <a href="http://spacy.io">spaCy</a> library, including part-of-speech tagging, entity recognition, and dependency parsing.</p></li>
<li>
<p><a href="https://github.com/quanteda/quanteda.corpora"><strong>quanteda.corpora</strong></a>: Additional textual data for use with <strong>quanteda</strong>.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"quanteda/quanteda.corpora"</span>)</pre></body></html></div>
</li>
<li>
<p><a href="https://github.com/kbenoit/quanteda.dictionaries"><strong>quanteda.dictionaries</strong></a>: Various dictionaries for use with <strong>quanteda</strong>, including the function <code>liwcalike()</code>, an R implementation of the <a href="http://liwc.wpengine.com">Linguistic Inquiry and Word Count</a> approach to text analysis.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"kbenoit/quanteda.dictionaries"</span>)</pre></body></html></div>
</li>
</ul>
</div>
</div>
<div id="creating-a-corpus" class="section level1">
<h1 class="hasAnchor">
<a href="#creating-a-corpus" class="anchor"></a>Creating a Corpus</h1>
<p>You load the package to access to functions and data in the package.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"quanteda"</span>)</pre></body></html></div>
<div id="currently-available-corpus-sources" class="section level2">
<h2 class="hasAnchor">
<a href="#currently-available-corpus-sources" class="anchor"></a>Currently available corpus sources</h2>
<p><strong>quanteda</strong> has a simple and powerful companion package for loading texts: <a href="https://github.com/quanteda/readtext"><strong>readtext</strong></a>. The main function in this package, <code><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext()</a></code>, takes a file or fileset from disk or a URL, and returns a type of data.frame that can be used directly with the <code><a href="../reference/corpus.html">corpus()</a></code> constructor function, to create a <strong>quanteda</strong> corpus object.</p>
<p><code><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext()</a></code> works on:</p>
<ul>
<li>text (<code>.txt</code>) files;</li>
<li>comma-separated-value (<code>.csv</code>) files;</li>
<li>XML formatted data;</li>
<li>data from the Facebook API, in JSON format;</li>
<li>data from the Twitter API, in JSON format; and</li>
<li>generic JSON data.</li>
</ul>
<p>The corpus constructor command <code><a href="../reference/corpus.html">corpus()</a></code> works directly on:</p>
<ul>
<li>a vector of character objects, for instance that you have already loaded into the workspace using other tools;</li>
<li>a <code>VCorpus</code> corpus object from the <strong>tm</strong> package.</li>
<li>a data.frame containing a text column and any other document-level metadata.</li>
</ul>
<div id="building-a-corpus-from-a-character-vector" class="section level3">
<h3 class="hasAnchor">
<a href="#building-a-corpus-from-a-character-vector" class="anchor"></a>Building a corpus from a character vector</h3>
<p>The simplest case is to create a corpus from a vector of texts already in memory in R. This gives the advanced R user complete flexibility with his or her choice of text inputs, as there are almost endless ways to get a vector of texts into R.</p>
<p>If we already have the texts in this form, we can call the corpus constructor function directly. We can demonstrate this on the built-in character object of the texts about immigration policy extracted from the 2010 election manifestos of the UK political parties (called <code>data_char_ukimmig2010</code>).</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">corp_uk</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/corpus.html">corpus</a></span>(<span class="no">data_char_ukimmig2010</span>)  <span class="co"># build a new corpus from the texts</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="no">corp_uk</span>)</pre></body></html></div>
<pre><code>## Corpus consisting of 9 documents, showing 9 documents:
## 
##          Text Types Tokens Sentences
##           BNP  1125   3280        88
##     Coalition   142    260         4
##  Conservative   251    499        15
##        Greens   322    677        21
##        Labour   298    680        29
##        LibDem   251    483        14
##            PC    77    114         5
##           SNP    88    134         4
##          UKIP   346    722        27</code></pre>
<p>If we wanted, we could add some document-level variables – what quanteda calls <em>docvars</em> – to this corpus.</p>
<p>We can do this using the R’s <code><a href="https://rdrr.io/r/base/names.html">names()</a></code> function to get the names of the character vector <code>data_char_ukimmig2010</code>, and assign this to a document variable (<em>docvar</em>).</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="../reference/docvars.html">docvars</a></span>(<span class="no">corp_uk</span>, <span class="st">"Party"</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">data_char_ukimmig2010</span>)
<span class="fu"><a href="../reference/docvars.html">docvars</a></span>(<span class="no">corp_uk</span>, <span class="st">"Year"</span>) <span class="kw">&lt;-</span> <span class="fl">2010</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="no">corp_uk</span>)</pre></body></html></div>
<pre><code>## Corpus consisting of 9 documents, showing 9 documents:
## 
##          Text Types Tokens Sentences        Party Year
##           BNP  1125   3280        88          BNP 2010
##     Coalition   142    260         4    Coalition 2010
##  Conservative   251    499        15 Conservative 2010
##        Greens   322    677        21       Greens 2010
##        Labour   298    680        29       Labour 2010
##        LibDem   251    483        14       LibDem 2010
##            PC    77    114         5           PC 2010
##           SNP    88    134         4          SNP 2010
##          UKIP   346    722        27         UKIP 2010</code></pre>
</div>
<div id="loading-in-files-using-the-readtext-package" class="section level3">
<h3 class="hasAnchor">
<a href="#loading-in-files-using-the-readtext-package" class="anchor"></a>Loading in files using the readtext package</h3>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">readtext</span>)

<span class="co"># Twitter json</span>
<span class="no">dat_json</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/social media/zombies/tweets.json"</span>)
<span class="no">corp_twitter</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/corpus.html">corpus</a></span>(<span class="no">dat_json</span>)
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="no">corp_twitter</span>, <span class="fl">5</span>)
<span class="co"># generic json - needs a textfield specifier</span>
<span class="no">dat_sotu</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/Manuscripts/collocations/Corpora/sotu/sotu.json"</span>,
    <span class="kw">textfield</span> <span class="kw">=</span> <span class="st">"text"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="fu"><a href="../reference/corpus.html">corpus</a></span>(<span class="no">dat_sotu</span>), <span class="fl">5</span>)
<span class="co"># text file</span>
<span class="no">dat_txtone</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/project_gutenberg/pg2701.txt"</span>,
    <span class="kw">cache</span> <span class="kw">=</span> <span class="fl">FALSE</span>)
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="fu"><a href="../reference/corpus.html">corpus</a></span>(<span class="no">dat_txtone</span>), <span class="fl">5</span>)
<span class="co"># multiple text files</span>
<span class="no">dat_txtmultiple1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/inaugural/*.txt"</span>, <span class="kw">cache</span> <span class="kw">=</span> <span class="fl">FALSE</span>)
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="fu"><a href="../reference/corpus.html">corpus</a></span>(<span class="no">dat_txtmultiple1</span>), <span class="fl">5</span>)
<span class="co"># multiple text files with docvars from filenames</span>
<span class="no">dat_txtmultiple2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/inaugural/*.txt"</span>, <span class="kw">docvarsfrom</span> <span class="kw">=</span> <span class="st">"filenames"</span>,
    <span class="kw">sep</span> <span class="kw">=</span> <span class="st">"-"</span>, <span class="kw">docvarnames</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Year"</span>, <span class="st">"President"</span>))
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="fu"><a href="../reference/corpus.html">corpus</a></span>(<span class="no">dat_txtmultiple2</span>), <span class="fl">5</span>)
<span class="co"># XML data</span>
<span class="no">dat_xml</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/quanteda_working_files/xmlData/plant_catalog.xml"</span>,
    <span class="kw">textfield</span> <span class="kw">=</span> <span class="st">"COMMON"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="fu"><a href="../reference/corpus.html">corpus</a></span>(<span class="no">dat_xml</span>), <span class="fl">5</span>)
<span class="co"># csv file</span>
<span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">inaug_speech</span> <span class="kw">=</span> <span class="fu"><a href="../reference/texts.html">texts</a></span>(<span class="no">data_corpus_inaugural</span>), <span class="fu"><a href="../reference/docvars.html">docvars</a></span>(<span class="no">data_corpus_inaugural</span>)),
    <span class="kw">file</span> <span class="kw">=</span> <span class="st">"/tmp/inaug_texts.csv"</span>, <span class="kw">row.names</span> <span class="kw">=</span> <span class="fl">FALSE</span>)
<span class="no">dat_csv</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"/tmp/inaug_texts.csv"</span>, <span class="kw">textfield</span> <span class="kw">=</span> <span class="st">"inaug_speech"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="fu"><a href="../reference/corpus.html">corpus</a></span>(<span class="no">dat_csv</span>), <span class="fl">5</span>)</pre></body></html></div>
</div>
</div>
<div id="how-a-quanteda-corpus-works" class="section level2">
<h2 class="hasAnchor">
<a href="#how-a-quanteda-corpus-works" class="anchor"></a>How a quanteda corpus works</h2>
<div id="corpus-principles" class="section level3">
<h3 class="hasAnchor">
<a href="#corpus-principles" class="anchor"></a>Corpus principles</h3>
<p>A corpus is designed to be a “library” of original documents that have been converted to plain, UTF-8 encoded text, and stored along with meta-data at the corpus level and at the document-level. We have a special name for document-level meta-data: <em>docvars</em>. These are variables or features that describe attributes of each document.</p>
<p>A corpus is designed to be a more or less static container of texts with respect to processing and analysis. This means that the texts in corpus are not designed to be changed internally through (for example) cleaning or pre-processing steps, such as stemming or removing punctuation. Rather, texts can be extracted from the corpus as part of processing, and assigned to new objects, but the idea is that the corpus will remain as an original reference copy so that other analyses – for instance those in which stems and punctuation were required, such as analyzing a reading ease index – can be performed on the same corpus.</p>
<p>To extract texts from a corpus, we use an extractor, called <code><a href="../reference/texts.html">texts()</a></code>.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="../reference/texts.html">texts</a></span>(<span class="no">data_corpus_inaugural</span>)[<span class="fl">2</span>]</pre></body></html></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              1793-Washington 
## "Fellow citizens, I am again called upon by the voice of my country to execute the functions of its Chief Magistrate. When the occasion proper for it shall arrive, I shall endeavor to express the high sense I entertain of this distinguished honor, and of the confidence which has been reposed in me by the people of united America.\n\nPrevious to the execution of any official act of the President the Constitution requires an oath of office. This oath I am now about to take, and in your presence: That if it shall be found during my administration of the Government I have in any instance violated willingly or knowingly the injunctions thereof, I may (besides incurring constitutional punishment) be subject to the upbraidings of all who are now witnesses of the present solemn ceremony.\n\n "</code></pre>
<p>To summarize the texts from a corpus, we can call a <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> method defined for a corpus.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="no">data_corpus_inaugural</span>, <span class="kw">n</span> <span class="kw">=</span> <span class="fl">5</span>)</pre></body></html></div>
<pre><code>## Corpus consisting of 58 documents, showing 5 documents:
## 
##             Text Types Tokens Sentences Year  President FirstName
##  1789-Washington   625   1537        23 1789 Washington    George
##  1793-Washington    96    147         4 1793 Washington    George
##       1797-Adams   826   2577        37 1797      Adams      John
##   1801-Jefferson   717   1923        41 1801  Jefferson    Thomas
##   1805-Jefferson   804   2380        45 1805  Jefferson    Thomas
##                  Party
##                   none
##                   none
##             Federalist
##  Democratic-Republican
##  Democratic-Republican</code></pre>
<p>We can save the output from the summary command as a data frame, and plot some basic descriptive statistics with this information:</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">tokeninfo</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="no">data_corpus_inaugural</span>)
<span class="no">tokeninfo</span>$<span class="no">Year</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/docvars.html">docvars</a></span>(<span class="no">data_corpus_inaugural</span>, <span class="st">"Year"</span>)
<span class="kw">if</span> (<span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">ggplot2</span>)) <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">tokeninfo</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">Year</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">Tokens</span>, <span class="kw">group</span> <span class="kw">=</span> <span class="fl">1</span>)) +
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() + <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>() + <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span>(<span class="kw">labels</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">1789</span>, <span class="fl">2017</span>, <span class="fl">12</span>)),
    <span class="kw">breaks</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">1789</span>, <span class="fl">2017</span>, <span class="fl">12</span>)) + <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span>()</pre></body></html></div>
<pre><code>## Loading required package: ggplot2</code></pre>
<p><img src="quickstart_files/figure-html/unnamed-chunk-11-1.png" width="768"></p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="co"># Longest inaugural address: William Henry Harrison</span>
<span class="no">tokeninfo</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.max</a></span>(<span class="no">tokeninfo</span>$<span class="no">Tokens</span>), ]</pre></body></html></div>
<pre><code>##             Text Types Tokens Sentences Year President     FirstName Party
## 14 1841-Harrison  1898   9123       210 1841  Harrison William Henry  Whig</code></pre>
</div>
</div>
<div id="tools-for-handling-corpus-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#tools-for-handling-corpus-objects" class="anchor"></a>Tools for handling corpus objects</h2>
<div id="adding-two-corpus-objects-together" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-two-corpus-objects-together" class="anchor"></a>Adding two corpus objects together</h3>
<p>The <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> operator provides a simple method for concatenating two corpus objects. If they contain different sets of document-level variables, these will be stitched together in a fashion that guarantees that no information is lost. Corpus-level meta-data is also concatenated.</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="no">corp1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/corpus.html">corpus</a></span>(<span class="no">data_corpus_inaugural</span>[<span class="fl">1</span>:<span class="fl">5</span>])
<span class="no">corp2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/corpus.html">corpus</a></span>(<span class="no">data_corpus_inaugural</span>[<span class="fl">53</span>:<span class="fl">58</span>])
<span class="no">corp3</span> <span class="kw">&lt;-</span> <span class="no">corp1</span> + <span class="no">corp2</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="no">corp3</span>)</pre></body></html></div>
<pre><code>## Corpus consisting of 11 documents, showing 11 documents:
## 
##             Text Types Tokens Sentences Year  President FirstName
##  1789-Washington   625   1537        23 1789 Washington    George
##  1793-Washington    96    147         4 1793 Washington    George
##       1797-Adams   826   2577        37 1797      Adams      John
##   1801-Jefferson   717   1923        41 1801  Jefferson    Thomas
##   1805-Jefferson   804   2380        45 1805  Jefferson    Thomas
##     1997-Clinton   773   2436       111 1997    Clinton      Bill
##        2001-Bush   621   1806        97 2001       Bush George W.
##        2005-Bush   772   2312        99 2005       Bush George W.
##       2009-Obama   938   2689       110 2009      Obama    Barack
##       2013-Obama   814   2317        88 2013      Obama    Barack
##       2017-Trump   582   1660        88 2017      Trump Donald J.
##                  Party
##                   none
##                   none
##             Federalist
##  Democratic-Republican
##  Democratic-Republican
##             Democratic
##             Republican
##             Republican
##             Democratic
##             Democratic
##             Republican</code></pre>
</div>
<div id="subsetting-corpus-objects" class="section level3">
<h3 class="hasAnchor">
<a href="#subsetting-corpus-objects" class="anchor"></a>Subsetting corpus objects</h3>
<p>There is a method of the <code><a href="../reference/corpus_subset.html">corpus_subset()</a></code> function defined for corpus objects, where a new corpus can be extracted based on logical conditions applied to <em>docvars</em>:</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="fu"><a href="../reference/corpus_subset.html">corpus_subset</a></span>(<span class="no">data_corpus_inaugural</span>, <span class="no">Year</span> <span class="kw">&gt;</span> <span class="fl">1990</span>))</pre></body></html></div>
<pre><code>## Corpus consisting of 7 documents, showing 7 documents:
## 
##          Text Types Tokens Sentences Year President FirstName      Party
##  1993-Clinton   642   1833        81 1993   Clinton      Bill Democratic
##  1997-Clinton   773   2436       111 1997   Clinton      Bill Democratic
##     2001-Bush   621   1806        97 2001      Bush George W. Republican
##     2005-Bush   772   2312        99 2005      Bush George W. Republican
##    2009-Obama   938   2689       110 2009     Obama    Barack Democratic
##    2013-Obama   814   2317        88 2013     Obama    Barack Democratic
##    2017-Trump   582   1660        88 2017     Trump Donald J. Republican</code></pre>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="fu"><a href="../reference/corpus_subset.html">corpus_subset</a></span>(<span class="no">data_corpus_inaugural</span>, <span class="no">President</span> <span class="kw">==</span> <span class="st">"Adams"</span>))</pre></body></html></div>
<pre><code>## Corpus consisting of 2 documents, showing 2 documents:
## 
##        Text Types Tokens Sentences Year President   FirstName
##  1797-Adams   826   2577        37 1797     Adams        John
##  1825-Adams  1003   3147        74 1825     Adams John Quincy
##                  Party
##             Federalist
##  Democratic-Republican</code></pre>
</div>
</div>
<div id="exploring-corpus-texts" class="section level2">
<h2 class="hasAnchor">
<a href="#exploring-corpus-texts" class="anchor"></a>Exploring corpus texts</h2>
<p>The <code>kwic</code> function (keywords-in-context) performs a search for a word and allows us to view the contexts in which it occurs:</p>
<div class="sourceCode" id="cb24"><html><body><pre class="r"><span class="fu"><a href="../reference/kwic.html">kwic</a></span>(<span class="no">data_corpus_inaugural</span>, <span class="kw">pattern</span> <span class="kw">=</span> <span class="st">"terror"</span>)</pre></body></html></div>
<pre><code>##                                                                     
##     [1797-Adams, 1324]              fraud or violence, by | terror |
##  [1933-Roosevelt, 111] nameless, unreasoning, unjustified | terror |
##  [1941-Roosevelt, 285]      seemed frozen by a fatalistic | terror |
##    [1961-Kennedy, 850]    alter that uncertain balance of | terror |
##     [1981-Reagan, 811]     freeing all Americans from the | terror |
##   [1997-Clinton, 1047]        They fuel the fanaticism of | terror |
##   [1997-Clinton, 1647]  maintain a strong defense against | terror |
##     [2009-Obama, 1619]     advance their aims by inducing | terror |
##                                   
##  , intrigue, or venality          
##  which paralyzes needed efforts to
##  , we proved that this            
##  that stays the hand of           
##  of runaway living costs.         
##  . And they torment the           
##  and destruction. Our children    
##  and slaughtering innocents, we</code></pre>
<div class="sourceCode" id="cb26"><html><body><pre class="r"><span class="fu"><a href="../reference/kwic.html">kwic</a></span>(<span class="no">data_corpus_inaugural</span>, <span class="kw">pattern</span> <span class="kw">=</span> <span class="st">"terror"</span>, <span class="kw">valuetype</span> <span class="kw">=</span> <span class="st">"regex"</span>)</pre></body></html></div>
<pre><code>##                                                                             
##     [1797-Adams, 1324]                   fraud or violence, by |  terror   |
##  [1933-Roosevelt, 111]      nameless, unreasoning, unjustified |  terror   |
##  [1941-Roosevelt, 285]           seemed frozen by a fatalistic |  terror   |
##    [1961-Kennedy, 850]         alter that uncertain balance of |  terror   |
##    [1961-Kennedy, 972]               of science instead of its |  terrors  |
##     [1981-Reagan, 811]          freeing all Americans from the |  terror   |
##    [1981-Reagan, 2186]        understood by those who practice | terrorism |
##   [1997-Clinton, 1047]             They fuel the fanaticism of |  terror   |
##   [1997-Clinton, 1647]       maintain a strong defense against |  terror   |
##     [2009-Obama, 1619]          advance their aims by inducing |  terror   |
##     [2017-Trump, 1117] civilized world against radical Islamic | terrorism |
##                                   
##  , intrigue, or venality          
##  which paralyzes needed efforts to
##  , we proved that this            
##  that stays the hand of           
##  . Together let us explore        
##  of runaway living costs.         
##  and prey upon their neighbors    
##  . And they torment the           
##  and destruction. Our children    
##  and slaughtering innocents, we   
##  , which we will eradicate</code></pre>
<div class="sourceCode" id="cb28"><html><body><pre class="r"><span class="fu"><a href="../reference/kwic.html">kwic</a></span>(<span class="no">data_corpus_inaugural</span>, <span class="kw">pattern</span> <span class="kw">=</span> <span class="st">"communist*"</span>)</pre></body></html></div>
<pre><code>##                                                                   
##   [1949-Truman, 832] the actions resulting from the | Communist  |
##  [1961-Kennedy, 510]      required- not because the | Communists |
##                            
##  philosophy are a threat to
##  may be doing it,</code></pre>
<p>Using <code><a href="../reference/phrase.html">phrase()</a></code> we can also look up multi-word expressions.</p>
<div class="sourceCode" id="cb30"><html><body><pre class="r"><span class="fu"><a href="../reference/kwic.html">kwic</a></span>(<span class="no">data_corpus_inaugural</span>, <span class="kw">pattern</span> <span class="kw">=</span> <span class="fu"><a href="../reference/phrase.html">phrase</a></span>(<span class="st">"United States"</span>)) <span class="kw">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>()  <span class="co"># show context of the first six occurrences of 'United States'</span></pre></body></html></div>
<pre><code>##                                                                              
##  [1789-Washington, 433:434]            of the people of the | United States |
##  [1789-Washington, 529:530]          more than those of the | United States |
##       [1797-Adams, 524:525]     saw the Constitution of the | United States |
##     [1797-Adams, 1716:1717]      to the Constitution of the | United States |
##     [1797-Adams, 2480:2481] support the Constitution of the | United States |
##   [1805-Jefferson, 441:442]       sees a taxgatherer of the | United States |
##                                       
##  a Government instituted by themselves
##  . Every step by which                
##  in a foreign country.                
##  , and a conscientious determination  
##  , I entertain no doubt               
##  ? These contributions enable us</code></pre>
<p>In the above summary, <code>Year</code> and <code>President</code> are variables associated with each document. We can access such variables with the <code><a href="../reference/docvars.html">docvars()</a></code> function.</p>
<div class="sourceCode" id="cb32"><html><body><pre class="r"><span class="co"># inspect the document-level variables</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fu"><a href="../reference/docvars.html">docvars</a></span>(<span class="no">data_corpus_inaugural</span>))</pre></body></html></div>
<pre><code>##   Year  President FirstName                 Party
## 1 1789 Washington    George                  none
## 2 1793 Washington    George                  none
## 3 1797      Adams      John            Federalist
## 4 1801  Jefferson    Thomas Democratic-Republican
## 5 1805  Jefferson    Thomas Democratic-Republican
## 6 1809    Madison     James Democratic-Republican</code></pre>
<p>More corpora are available from the <a href="http://github.com/quanteda/quanteda.corpora">quanteda.corpora</a> package.</p>
</div>
</div>
<div id="extracting-features-from-a-corpus" class="section level1">
<h1 class="hasAnchor">
<a href="#extracting-features-from-a-corpus" class="anchor"></a>Extracting Features from a Corpus</h1>
<p>In order to perform statistical analysis such as document scaling, we must extract a matrix associating values for certain features with each document. In quanteda, we use the <code><a href="../reference/dfm.html">dfm()</a></code> function to produce such a matrix. “dfm” is short for <em>document-feature matrix</em>, and always refers to documents in rows and “features” as columns. We fix this dimensional orientation because it is standard in data analysis to have a unit of analysis as a row, and features or variables pertaining to each unit as columns. We call them “features” rather than terms, because features are more general than terms: they can be defined as raw terms, stemmed terms, the parts of speech of terms, terms after stopwords have been removed, or a dictionary class to which a term belongs. Features can be entirely general, such as ngrams or syntactic dependencies, and we leave this open-ended.</p>
<div id="tokenizing-texts" class="section level2">
<h2 class="hasAnchor">
<a href="#tokenizing-texts" class="anchor"></a>Tokenizing texts</h2>
<p>To simply tokenize a text, quanteda provides a powerful command called <code><a href="../reference/tokens.html">tokens()</a></code>. This produces an intermediate object, consisting of a list of tokens in the form of character vectors, where each element of the list corresponds to an input document.</p>
<p><code><a href="../reference/tokens.html">tokens()</a></code> is deliberately conservative, meaning that it does not remove anything from the text unless told to do so.</p>
<div class="sourceCode" id="cb34"><html><body><pre class="r"><span class="no">txt</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">text1</span> <span class="kw">=</span> <span class="st">"This is $10 in 999 different ways,\n up and down; left and right!"</span>,
    <span class="kw">text2</span> <span class="kw">=</span> <span class="st">"@kenbenoit working: on #quanteda 2day\t4ever, http://textasdata.com?page=123."</span>)
<span class="fu"><a href="../reference/tokens.html">tokens</a></span>(<span class="no">txt</span>)</pre></body></html></div>
<pre><code>## Tokens consisting of 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "10"        "in"        "999"      
##  [7] "different" "ways"      ","         "up"        "and"       "down"     
## [ ... and 5 more ]
## 
## text2 :
## [1] "@kenbenoit"                      "working"                        
## [3] ":"                               "on"                             
## [5] "#quanteda"                       "2day"                           
## [7] "4ever"                           ","                              
## [9] "http://textasdata.com?page=123."</code></pre>
<div class="sourceCode" id="cb36"><html><body><pre class="r"><span class="fu"><a href="../reference/tokens.html">tokens</a></span>(<span class="no">txt</span>, <span class="kw">remove_numbers</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">remove_punct</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<pre><code>## Tokens consisting of 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "in"        "different" "ways"     
##  [7] "up"        "and"       "down"      "left"      "and"       "right"    
## 
## text2 :
## [1] "@kenbenoit"                      "working"                        
## [3] "on"                              "#quanteda"                      
## [5] "2day"                            "4ever"                          
## [7] "http://textasdata.com?page=123."</code></pre>
<div class="sourceCode" id="cb38"><html><body><pre class="r"><span class="fu"><a href="../reference/tokens.html">tokens</a></span>(<span class="no">txt</span>, <span class="kw">remove_numbers</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">remove_punct</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<pre><code>## Tokens consisting of 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "10"        "in"        "999"      
##  [7] "different" "ways"      "up"        "and"       "down"      "left"     
## [ ... and 2 more ]
## 
## text2 :
## [1] "@kenbenoit"                      "working"                        
## [3] "on"                              "#quanteda"                      
## [5] "2day"                            "4ever"                          
## [7] "http://textasdata.com?page=123."</code></pre>
<div class="sourceCode" id="cb40"><html><body><pre class="r"><span class="fu"><a href="../reference/tokens.html">tokens</a></span>(<span class="no">txt</span>, <span class="kw">remove_numbers</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">remove_punct</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<pre><code>## Tokens consisting of 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "in"        "different" "ways"     
##  [7] ","         "up"        "and"       "down"      ";"         "left"     
## [ ... and 3 more ]
## 
## text2 :
## [1] "@kenbenoit"                      "working"                        
## [3] ":"                               "on"                             
## [5] "#quanteda"                       "2day"                           
## [7] "4ever"                           ","                              
## [9] "http://textasdata.com?page=123."</code></pre>
<div class="sourceCode" id="cb42"><html><body><pre class="r"><span class="fu"><a href="../reference/tokens.html">tokens</a></span>(<span class="no">txt</span>, <span class="kw">remove_numbers</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">remove_punct</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<pre><code>## Tokens consisting of 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "10"        "in"        "999"      
##  [7] "different" "ways"      ","         "up"        "and"       "down"     
## [ ... and 5 more ]
## 
## text2 :
## [1] "@kenbenoit"                      "working"                        
## [3] ":"                               "on"                             
## [5] "#quanteda"                       "2day"                           
## [7] "4ever"                           ","                              
## [9] "http://textasdata.com?page=123."</code></pre>
<div class="sourceCode" id="cb44"><html><body><pre class="r"><span class="fu"><a href="../reference/tokens.html">tokens</a></span>(<span class="no">txt</span>, <span class="kw">remove_numbers</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">remove_punct</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">remove_separators</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<pre><code>## Tokens consisting of 2 documents.
## text1 :
##  [1] "This"      " "         "is"        " "         "$"         "10"       
##  [7] " "         "in"        " "         "999"       " "         "different"
## [ ... and 18 more ]
## 
## text2 :
##  [1] "@kenbenoit" " "          "working"    ":"          " "         
##  [6] "on"         " "          "#quanteda"  " "          "2day"      
## [11] "\t"         "4ever"     
## [ ... and 3 more ]</code></pre>
<p>We also have the option to tokenize characters:</p>
<div class="sourceCode" id="cb46"><html><body><pre class="r"><span class="fu"><a href="../reference/tokens.html">tokens</a></span>(<span class="st">"Great website: http://textasdata.com?page=123."</span>, <span class="kw">what</span> <span class="kw">=</span> <span class="st">"character"</span>)</pre></body></html></div>
<pre><code>## Tokens consisting of 1 document.
## text1 :
##  [1] "G" "r" "e" "a" "t" "w" "e" "b" "s" "i" "t" "e"
## [ ... and 32 more ]</code></pre>
<div class="sourceCode" id="cb48"><html><body><pre class="r"><span class="fu"><a href="../reference/tokens.html">tokens</a></span>(<span class="st">"Great website: http://textasdata.com?page=123."</span>, <span class="kw">what</span> <span class="kw">=</span> <span class="st">"character"</span>, <span class="kw">remove_separators</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<pre><code>## Tokens consisting of 1 document.
## text1 :
##  [1] "G" "r" "e" "a" "t" " " "w" "e" "b" "s" "i" "t"
## [ ... and 34 more ]</code></pre>
<p>and sentences:</p>
<div class="sourceCode" id="cb50"><html><body><pre class="r"><span class="co"># sentence level</span>
<span class="fu"><a href="../reference/tokens.html">tokens</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Kurt Vongeut said; only assholes use semi-colons."</span>, <span class="st">"Today is Thursday in Canberra:  It is yesterday in London."</span>,
    <span class="st">"En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</span>), <span class="kw">what</span> <span class="kw">=</span> <span class="st">"sentence"</span>)</pre></body></html></div>
<pre><code>## Tokens consisting of 3 documents.
## text1 :
## [1] "Kurt Vongeut said; only assholes use semi-colons."
## 
## text2 :
## [1] "Today is Thursday in Canberra:  It is yesterday in London."
## 
## text3 :
## [1] "En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</code></pre>
<p>With <code><a href="../reference/tokens_compound.html">tokens_compound()</a></code>, we can concatenate multi-word expressions and keep them as a single feature in subsequent analyses:</p>
<div class="sourceCode" id="cb52"><html><body><pre class="r"><span class="fu"><a href="../reference/tokens.html">tokens</a></span>(<span class="st">"New York City is located in the United States."</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/tokens_compound.html">tokens_compound</a></span>(<span class="kw">pattern</span> <span class="kw">=</span> <span class="fu"><a href="../reference/phrase.html">phrase</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"New York City"</span>,
    <span class="st">"United States"</span>)))</pre></body></html></div>
<pre><code>## Tokens consisting of 1 document.
## text1 :
## [1] "New_York_City" "is"            "located"       "in"           
## [5] "the"           "United_States" "."</code></pre>
</div>
<div id="constructing-a-document-feature-matrix" class="section level2">
<h2 class="hasAnchor">
<a href="#constructing-a-document-feature-matrix" class="anchor"></a>Constructing a document-feature matrix</h2>
<p>Tokenizing texts is an intermediate option, and most users will want to skip straight to constructing a document-feature matrix. For this, we have a Swiss-army knife function, called <code><a href="../reference/dfm.html">dfm()</a></code>, which performs tokenization and tabulates the extracted features into a matrix of documents by features. Unlike the conservative approach taken by <code><a href="../reference/tokens.html">tokens()</a></code>, the <code><a href="../reference/dfm.html">dfm()</a></code> function applies certain options by default, such as <code><a href="https://rdrr.io/r/base/chartr.html">tolower()</a></code> – a separate function for lower-casing texts – and removes punctuation. All of the options to <code><a href="../reference/tokens.html">tokens()</a></code> can be passed to <code><a href="../reference/dfm.html">dfm()</a></code>, however.</p>
<div class="sourceCode" id="cb54"><html><body><pre class="r"><span class="no">corp_inaug_post1990</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/corpus_subset.html">corpus_subset</a></span>(<span class="no">data_corpus_inaugural</span>, <span class="no">Year</span> <span class="kw">&gt;</span> <span class="fl">1990</span>)

<span class="co"># make a dfm</span>
<span class="no">dfmat_inaug_post1990</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dfm.html">dfm</a></span>(<span class="no">corp_inaug_post1990</span>)
<span class="no">dfmat_inaug_post1990</span>[, <span class="fl">1</span>:<span class="fl">5</span>]</pre></body></html></div>
<pre><code>## Document-feature matrix of: 7 documents, 5 features (0.0% sparse) and 4 docvars.
##               features
## docs           my fellow citizens   , today
##   1993-Clinton  7      5        2 139    10
##   1997-Clinton  6      7        7 131     5
##   2001-Bush     3      1        9 110     2
##   2005-Bush     2      3        6 120     3
##   2009-Obama    2      1        1 130     6
##   2013-Obama    3      3        6  99     4
## [ reached max_ndoc ... 1 more document ]</code></pre>
<p>Other options for a <code><a href="../reference/dfm.html">dfm()</a></code> include removing stopwords, and stemming the tokens.</p>
<div class="sourceCode" id="cb56"><html><body><pre class="r"><span class="co"># make a dfm, removing stopwords and applying stemming</span>
<span class="no">dfmat_inaug_post1990</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dfm.html">dfm</a></span>(<span class="no">dfmat_inaug_post1990</span>, <span class="kw">remove</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>),
    <span class="kw">stem</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">remove_punct</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<pre><code>## Warning: remove_punct argument is not used.</code></pre>
<div class="sourceCode" id="cb58"><html><body><pre class="r"><span class="no">dfmat_inaug_post1990</span>[, <span class="fl">1</span>:<span class="fl">5</span>]</pre></body></html></div>
<pre><code>## Document-feature matrix of: 7 documents, 5 features (2.86% sparse) and 4 docvars.
##               features
## docs           fellow citizen   , today celebr
##   1993-Clinton      5       2 139    10      4
##   1997-Clinton      7       8 131     6      1
##   2001-Bush         1      10 110     2      0
##   2005-Bush         3       7 120     3      2
##   2009-Obama        1       1 130     6      2
##   2013-Obama        3       8  99     6      1
## [ reached max_ndoc ... 1 more document ]</code></pre>
<p>The option <code>remove</code> provides a list of tokens to be ignored. Most users will supply a list of pre-defined “stop words”, defined for numerous languages, accessed through the <code><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords()</a></code> function:</p>
<div class="sourceCode" id="cb60"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"en"</span>), <span class="fl">20</span>)</pre></body></html></div>
<pre><code>##  [1] "i"          "me"         "my"         "myself"     "we"        
##  [6] "our"        "ours"       "ourselves"  "you"        "your"      
## [11] "yours"      "yourself"   "yourselves" "he"         "him"       
## [16] "his"        "himself"    "she"        "her"        "hers"</code></pre>
<div class="sourceCode" id="cb62"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"ru"</span>), <span class="fl">10</span>)</pre></body></html></div>
<pre><code>##  [1] "и"   "в"   "во"  "не"  "что" "он"  "на"  "я"   "с"   "со"</code></pre>
<div class="sourceCode" id="cb64"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"ar"</span>, <span class="kw">source</span> <span class="kw">=</span> <span class="st">"misc"</span>), <span class="fl">10</span>)</pre></body></html></div>
<pre><code>##  [1] "فى"  "في"  "كل"  "لم"  "لن"  "له"  "من"  "هو"  "هي"  "قوة"</code></pre>
<div id="viewing-the-document-feature-matrix" class="section level3">
<h3 class="hasAnchor">
<a href="#viewing-the-document-feature-matrix" class="anchor"></a>Viewing the document-feature matrix</h3>
<p>The dfm can be inspected in the Environment pane in RStudio, or by calling R’s <code><a href="../reference/View.html">View()</a></code> function. Calling <code><a href="../reference/textplot_wordcloud.html">textplot_wordcloud()</a></code> on a dfm will display a wordcloud.</p>
<div class="sourceCode" id="cb66"><html><body><pre class="r"><span class="no">dfmat_uk</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dfm.html">dfm</a></span>(<span class="no">data_char_ukimmig2010</span>, <span class="kw">remove</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), <span class="kw">remove_punct</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="no">dfmat_uk</span></pre></body></html></div>
<pre><code>## Document-feature matrix of: 9 documents, 1,551 features (83.8% sparse).
##               features
## docs           immigration unparalleled crisis bnp can solve current birth
##   BNP                   21            1      2  13   1     2       4     4
##   Coalition              6            0      0   0   0     0       1     0
##   Conservative           3            0      0   0   2     0       0     0
##   Greens                 8            0      0   0   1     0       0     0
##   Labour                13            0      0   0   1     0       0     0
##   LibDem                 5            0      0   0   2     0       0     0
##               features
## docs           rates indigenous
##   BNP              2          5
##   Coalition        0          0
##   Conservative     0          0
##   Greens           0          0
##   Labour           0          0
##   LibDem           0          0
## [ reached max_ndoc ... 3 more documents, reached max_nfeat ... 1,541 more features ]</code></pre>
<p>To access a list of the most frequently occurring features, we can use <code><a href="../reference/topfeatures.html">topfeatures()</a></code>:</p>
<div class="sourceCode" id="cb68"><html><body><pre class="r"><span class="fu"><a href="../reference/topfeatures.html">topfeatures</a></span>(<span class="no">dfmat_uk</span>, <span class="fl">20</span>)  <span class="co"># 20 most frequent words</span></pre></body></html></div>
<pre><code>## immigration     british      people      asylum     britain          uk 
##          66          37          35          29          28          27 
##      system  population     country         new  immigrants      ensure 
##          27          21          20          19          17          17 
##       shall citizenship      social    national         bnp     illegal 
##          17          16          14          14          13          13 
##        work     percent 
##          13          12</code></pre>
<p>Plotting a word cloud is done using <code><a href="../reference/textplot_wordcloud.html">textplot_wordcloud()</a></code>, for a <code>dfm</code> class object. This function passes arguments through to <code><a href="../reference/wordcloud.html">wordcloud()</a></code> from the <strong>wordcloud</strong> package, and can prettify the plot using the same arguments:</p>
<div class="sourceCode" id="cb70"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">100</span>)
<span class="fu"><a href="../reference/textplot_wordcloud.html">textplot_wordcloud</a></span>(<span class="no">dfmat_uk</span>, <span class="kw">min_count</span> <span class="kw">=</span> <span class="fl">6</span>, <span class="kw">random_order</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">rotation</span> <span class="kw">=</span> <span class="fl">0.25</span>,
    <span class="kw">color</span> <span class="kw">=</span> <span class="kw pkg">RColorBrewer</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html">brewer.pal</a></span>(<span class="fl">8</span>, <span class="st">"Dark2"</span>))</pre></body></html></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-28-1.png" width="672"></p>
</div>
<div id="grouping-documents-by-document-variable" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-documents-by-document-variable" class="anchor"></a>Grouping documents by document variable</h3>
<p>Often, we are interested in analysing how texts differ according to substantive factors which may be encoded in the document variables, rather than simply by the boundaries of the document files. We can group documents which share the same value for a document variable when creating a dfm:</p>
<div class="sourceCode" id="cb71"><html><body><pre class="r"><span class="no">dfmat_pres</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dfm.html">dfm</a></span>(<span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span>(<span class="no">data_corpus_inaugural</span>, <span class="fl">20</span>), <span class="kw">groups</span> <span class="kw">=</span> <span class="st">"Party"</span>, <span class="kw">remove</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>),
    <span class="kw">remove_punct</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p>We can sort this dfm, and inspect it:</p>
<div class="sourceCode" id="cb72"><html><body><pre class="r"><span class="fu"><a href="../reference/dfm_sort.html">dfm_sort</a></span>(<span class="no">dfmat_pres</span>)</pre></body></html></div>
<pre><code>## Document-feature matrix of: 2 documents, 4,357 features (32.6% sparse) and 1 docvar.
##             features
## docs          us world people can must new america nation freedom time
##   Democratic 130    84     78  80   87  88      54     72      43   50
##   Republican 140   107     89  84   68  66      83     62      84   58
## [ reached max_nfeat ... 4,347 more features ]</code></pre>
</div>
<div id="grouping-words-by-dictionary-or-equivalence-class" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-words-by-dictionary-or-equivalence-class" class="anchor"></a>Grouping words by dictionary or equivalence class</h3>
<p>For some applications we have prior knowledge of sets of words that are indicative of traits we would like to measure from the text. For example, a general list of positive words might indicate positive sentiment in a movie review, or we might have a dictionary of political terms which are associated with a particular ideological stance. In these cases, it is sometimes useful to treat these groups of words as equivalent for the purposes of analysis, and sum their counts into classes.</p>
<p>For example, let’s look at how words associated with terrorism and words associated with the economy vary by President in the inaugural speeches corpus. From the original corpus, we select Presidents since Clinton:</p>
<div class="sourceCode" id="cb74"><html><body><pre class="r"><span class="no">corp_inaug_post1991</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/corpus_subset.html">corpus_subset</a></span>(<span class="no">data_corpus_inaugural</span>, <span class="no">Year</span> <span class="kw">&gt;</span> <span class="fl">1991</span>)</pre></body></html></div>
<p>Now we define a demonstration dictionary:</p>
<div class="sourceCode" id="cb75"><html><body><pre class="r"><span class="no">dict</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dictionary.html">dictionary</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">terror</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"terrorism"</span>, <span class="st">"terrorists"</span>, <span class="st">"threat"</span>), <span class="kw">economy</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"jobs"</span>,
    <span class="st">"business"</span>, <span class="st">"grow"</span>, <span class="st">"work"</span>)))</pre></body></html></div>
<p>We can use the dictionary when making the dfm:</p>
<div class="sourceCode" id="cb76"><html><body><pre class="r"><span class="no">dfmat_inaug_post1991_dict</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dfm.html">dfm</a></span>(<span class="no">corp_inaug_post1991</span>, <span class="kw">dictionary</span> <span class="kw">=</span> <span class="no">dict</span>)
<span class="no">dfmat_inaug_post1991_dict</span></pre></body></html></div>
<pre><code>## Document-feature matrix of: 7 documents, 2 features (14.3% sparse) and 4 docvars.
##               features
## docs           terror economy
##   1993-Clinton      0       8
##   1997-Clinton      1       8
##   2001-Bush         0       4
##   2005-Bush         1       6
##   2009-Obama        1      10
##   2013-Obama        1       6
## [ reached max_ndoc ... 1 more document ]</code></pre>
<p>The constructor function <code><a href="../reference/dictionary.html">dictionary()</a></code> also works with two common “foreign” dictionary formats: the LIWC and Provalis Research’s Wordstat format. For instance, we can load the LIWC and apply this to the Presidential inaugural speech corpus:</p>
<div class="sourceCode" id="cb78"><html><body><pre class="r"><span class="no">dictliwc</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dictionary.html">dictionary</a></span>(<span class="kw">file</span> <span class="kw">=</span> <span class="st">"~/Dropbox/QUANTESS/dictionaries/LIWC/LIWC2001_English.dic"</span>,
    <span class="kw">format</span> <span class="kw">=</span> <span class="st">"LIWC"</span>)
<span class="no">dfmat_inaug_subset</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dfm.html">dfm</a></span>(<span class="no">data_corpus_inaugural</span>[<span class="fl">52</span>:<span class="fl">58</span>], <span class="kw">dictionary</span> <span class="kw">=</span> <span class="no">dictliwc</span>)
<span class="no">dfmat_inaug_subset</span>[, <span class="fl">1</span>:<span class="fl">10</span>]</pre></body></html></div>
</div>
</div>
</div>
<div id="further-examples" class="section level1">
<h1 class="hasAnchor">
<a href="#further-examples" class="anchor"></a>Further examples</h1>
<div id="similarities-between-texts" class="section level2">
<h2 class="hasAnchor">
<a href="#similarities-between-texts" class="anchor"></a>Similarities between texts</h2>
<div class="sourceCode" id="cb79"><html><body><pre class="r"><span class="no">dfmat_inaug_post1980</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dfm.html">dfm</a></span>(<span class="fu"><a href="../reference/corpus_subset.html">corpus_subset</a></span>(<span class="no">data_corpus_inaugural</span>, <span class="no">Year</span> <span class="kw">&gt;</span> <span class="fl">1980</span>), <span class="kw">remove</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>),
    <span class="kw">stem</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">remove_punct</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="no">tstat_obama</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/textstat_simil.html">textstat_simil</a></span>(<span class="no">dfmat_inaug_post1980</span>, <span class="no">dfmat_inaug_post1980</span>[<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"2009-Obama"</span>,
    <span class="st">"2013-Obama"</span>), ], <span class="kw">margin</span> <span class="kw">=</span> <span class="st">"documents"</span>, <span class="kw">method</span> <span class="kw">=</span> <span class="st">"cosine"</span>)
<span class="no">tstat_obama</span></pre></body></html></div>
<pre><code>## textstat_simil object; method = "cosine"
##              2009-Obama 2013-Obama
## 1981-Reagan       0.623      0.638
## 1985-Reagan       0.643      0.663
## 1989-Bush         0.625      0.578
## 1993-Clinton      0.628      0.627
## 1997-Clinton      0.659      0.647
## 2001-Bush         0.602      0.619
## 2005-Bush         0.527      0.587
## 2009-Obama        1.000      0.682
## 2013-Obama        0.682      1.000
## 2017-Trump        0.519      0.516</code></pre>
<div class="sourceCode" id="cb81"><html><body><pre class="r"># dotchart(as.list(tstat_obama)$'2009-Obama', xlab = 'Cosine similarity')</pre></body></html></div>
<p>We can use these distances to plot a dendrogram, clustering presidents:</p>
<div class="sourceCode" id="cb82"><html><body><pre class="r"><span class="no">data_corpus_sotu</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/connections.html">url</a></span>(<span class="st">"https://quanteda.org/data/data_corpus_sotu.rds"</span>))
<span class="no">dfmat_sotu</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dfm.html">dfm</a></span>(<span class="fu"><a href="../reference/corpus_subset.html">corpus_subset</a></span>(<span class="no">data_corpus_sotu</span>, <span class="no">Date</span> <span class="kw">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"1980-01-01"</span>)),
    <span class="kw">stem</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">remove_punct</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">remove</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>))
<span class="no">dfmat_sotu</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dfm_trim.html">dfm_trim</a></span>(<span class="no">dfmat_sotu</span>, <span class="kw">min_termfreq</span> <span class="kw">=</span> <span class="fl">5</span>, <span class="kw">min_docfreq</span> <span class="kw">=</span> <span class="fl">3</span>)

<span class="co"># hierarchical clustering - get distances on normalized dfm</span>
<span class="no">tstat_dist</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/textstat_simil.html">textstat_dist</a></span>(<span class="fu"><a href="../reference/dfm_weight.html">dfm_weight</a></span>(<span class="no">dfmat_sotu</span>, <span class="kw">scheme</span> <span class="kw">=</span> <span class="st">"prop"</span>))
<span class="co"># hiarchical clustering the distance object</span>
<span class="no">pres_cluster</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/hclust.html">hclust</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/dist.html">as.dist</a></span>(<span class="no">tstat_dist</span>))
<span class="co"># label with document names</span>
<span class="no">pres_cluster</span>$<span class="no">labels</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/docnames.html">docnames</a></span>(<span class="no">dfmat_sotu</span>)
<span class="co"># plot as a dendrogram</span>
<span class="fu"><a href="https://rdrr.io/r/base/plot.html">plot</a></span>(<span class="no">pres_cluster</span>, <span class="kw">xlab</span> <span class="kw">=</span> <span class="st">""</span>, <span class="kw">sub</span> <span class="kw">=</span> <span class="st">""</span>, <span class="kw">main</span> <span class="kw">=</span> <span class="st">"Euclidean Distance on Normalized Token Frequency"</span>)</pre></body></html></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-36-1.png" width="768"></p>
<p>We can also look at term similarities:</p>
<div class="sourceCode" id="cb83"><html><body><pre class="r"><span class="no">tstat_sim</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/textstat_simil.html">textstat_simil</a></span>(<span class="no">dfmat_sotu</span>, <span class="no">dfmat_sotu</span>[, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"fair"</span>, <span class="st">"health"</span>, <span class="st">"terror"</span>)],
    <span class="kw">method</span> <span class="kw">=</span> <span class="st">"cosine"</span>, <span class="kw">margin</span> <span class="kw">=</span> <span class="st">"features"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/list.html">as.list</a></span>(<span class="no">tstat_sim</span>), <span class="no">head</span>, <span class="fl">10</span>)</pre></body></html></div>
<pre><code>## $fair
##      time    better       far  strategi        us     lower      long       one 
## 0.8266617 0.8135324 0.8036487 0.8002557 0.8000581 0.7995066 0.7977770 0.7949795 
##   practic  american 
## 0.7944127 0.7892432 
## 
## $health
##    system      issu    privat      need    expand   support    reform      hous 
## 0.9232094 0.9229859 0.9175231 0.9143293 0.9118901 0.9072374 0.9057456 0.9054303 
##    dramat      mani 
## 0.9051588 0.9045851 
## 
## $terror
## terrorist    coalit    cheney      evil  homeland      11th    sudden     regim 
## 0.8539894 0.8179609 0.8175618 0.7949619 0.7878223 0.7603221 0.7556575 0.7533021 
##   septemb   tyranni 
## 0.7502925 0.7383253</code></pre>
</div>
<div id="scaling-document-positions" class="section level2">
<h2 class="hasAnchor">
<a href="#scaling-document-positions" class="anchor"></a>Scaling document positions</h2>
<p>Here is a demonstration of unsupervised document scaling comparing the “Wordfish” model:</p>
<div class="sourceCode" id="cb85"><html><body><pre class="r"><span class="kw">if</span> (<span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="st">"quanteda.textmodels"</span>)) {
    <span class="no">dfmat_ire</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dfm.html">dfm</a></span>(<span class="no">data_corpus_irishbudget2010</span>)
    <span class="no">tmod_wf</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/quanteda.textmodels/man/textmodel_wordfish.html">textmodel_wordfish</a></span>(<span class="no">dfmat_ire</span>, <span class="kw">dir</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>, <span class="fl">1</span>))

    <span class="co"># plot the Wordfish estimates by party</span>
    <span class="fu"><a href="https://rdrr.io/pkg/quanteda.textmodels/man/textplot_scale1d.html">textplot_scale1d</a></span>(<span class="no">tmod_wf</span>, <span class="kw">groups</span> <span class="kw">=</span> <span class="fu"><a href="../reference/docvars.html">docvars</a></span>(<span class="no">dfmat_ire</span>, <span class="st">"party"</span>))
}</pre></body></html></div>
<pre><code>## Loading required package: quanteda.textmodels</code></pre>
<pre><code>## 
## Attaching package: 'quanteda.textmodels'</code></pre>
<pre><code>## The following object is masked from 'package:quanteda':
## 
##     data_dfm_lbgexample</code></pre>
<p><img src="quickstart_files/figure-html/unnamed-chunk-38-1.png" width="672"></p>
</div>
<div id="topic-models" class="section level2">
<h2 class="hasAnchor">
<a href="#topic-models" class="anchor"></a>Topic models</h2>
<p><strong>quanteda</strong> makes it very easy to fit topic models as well, e.g.:</p>
<div class="sourceCode" id="cb89"><html><body><pre class="r"><span class="no">quant_dfm</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dfm.html">dfm</a></span>(<span class="no">data_corpus_irishbudget2010</span>, <span class="kw">remove_punct</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">remove_numbers</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
    <span class="kw">remove</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>))
<span class="no">quant_dfm</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dfm_trim.html">dfm_trim</a></span>(<span class="no">quant_dfm</span>, <span class="kw">min_termfreq</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">max_docfreq</span> <span class="kw">=</span> <span class="fl">10</span>)
<span class="no">quant_dfm</span></pre></body></html></div>
<pre><code>## Document-feature matrix of: 14 documents, 1,263 features (64.5% sparse) and 6 docvars.
##                       features
## docs                   supplementary april said period severe today report
##   Lenihan, Brian (FF)              7     1    1      2      3     9      6
##   Bruton, Richard (FG)             0     1    0      0      0     6      5
##   Burton, Joan (LAB)               0     0    4      2      0    13      1
##   Morgan, Arthur (SF)              1     3    0      3      0     4      0
##   Cowen, Brian (FF)                0     0    0      4      1     3      2
##   Kenny, Enda (FG)                 1     4    4      1      0     2      0
##                       features
## docs                   difficulties months road
##   Lenihan, Brian (FF)             6     11    2
##   Bruton, Richard (FG)            0      0    1
##   Burton, Joan (LAB)              1      3    1
##   Morgan, Arthur (SF)             1      4    2
##   Cowen, Brian (FF)               1      3    2
##   Kenny, Enda (FG)                0      2    5
## [ reached max_ndoc ... 8 more documents, reached max_nfeat ... 1,253 more features ]</code></pre>
<p>Now we can fit the topic model and plot it:</p>
<div class="sourceCode" id="cb91"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">100</span>)
<span class="kw">if</span> (<span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="st">"stm"</span>)) {
    <span class="no">my_lda_fit20</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/stm/man/stm.html">stm</a></span>(<span class="no">quant_dfm</span>, <span class="kw">K</span> <span class="kw">=</span> <span class="fl">20</span>, <span class="kw">verbose</span> <span class="kw">=</span> <span class="fl">FALSE</span>)
    <span class="fu"><a href="https://rdrr.io/r/base/plot.html">plot</a></span>(<span class="no">my_lda_fit20</span>)
}</pre></body></html></div>
<pre><code>## Loading required package: stm</code></pre>
<pre><code>## stm v1.3.5 successfully loaded. See ?stm for help. 
##  Papers, resources, and other materials at structuraltopicmodel.com</code></pre>
<p><img src="quickstart_files/figure-html/unnamed-chunk-40-1.png" width="672"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Kenneth Benoit, Kohei Watanabe, Haiyan Wang, Paul Nulty, Adam Obeng, Stefan Müller, Akitaka Matsuo, Jiong Wei Lua, Jouni Kuha, William Lowe, European Research Council.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '9b4ef7fd791dc6075154d3ebd7b12acf',
    indexName: 'quanteda',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
